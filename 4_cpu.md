# CPU 개념 정리 — 규칙 기반 실행 엔진으로서의 CPU

## CPU란 무엇인가

CPU(Central Processing Unit)는 단순히 계산을 수행하는 장치가 아니라,  
**정해진 규칙에 따라 명령어를 실행하고 시스템 전체의 흐름을 통제하는 실행 엔진**이다.

CPU의 동작은 소프트웨어의 선택이 아니라,  
**CPU 아키텍처에 정의된 규칙**에 의해 하드웨어 차원에서 강제된다.

---

## CPU를 구성하는 핵심 규칙들

CPU는 다음 네 가지 핵심 규칙의 결합으로 이해할 수 있다.

```
RISC / CISC     → 명령어 규칙
Pipeline        → 실행 방식
Interrupt       → 흐름 전환 규칙
Privilege Mode  → 권한 규칙
```

이 네 가지는 모두 **CPU가 어떻게 행동해야 하는지를 정의하는 아키텍처 규칙**이다.

---

## 1. RISC / CISC — 명령어 규칙

RISC/CISC는 CPU가 **어떤 명령어를 이해하고 실행할 수 있는지**를 정의하는 규칙이다.

이 규칙은 다음을 포함한다.

- 어떤 명령어들이 존재하는가
- 명령어 길이는 고정인가, 가변인가
- 메모리를 직접 접근하는 명령이 있는가
- 하나의 명령어가 수행할 수 있는 작업의 범위

즉, RISC/CISC는 **CPU의 언어(Instruction Set)**에 해당한다.  
CPU는 이 규칙 밖의 행동을 절대 하지 못한다.

---

## 2. Pipeline — 실행 방식 규칙

Pipeline은 CPU가 명령어를 **어떻게, 언제, 겹쳐서 실행하는지**를 정의한다.

대표적인 단계는 다음과 같다.

- Fetch
- Decode
- Execute
- Memory
- Write Back

Pipeline 규칙은 다음을 결정한다.

- 동시에 몇 개의 명령어를 처리할 수 있는가
- 언제 stall, flush가 발생하는가
- 클록 주파수와 처리량의 관계
- 지연(latency)과 예측 가능성

같은 명령어 집합을 사용하더라도,  
**파이프라인 구조에 따라 성능과 실시간 특성은 크게 달라진다.**

---

## 3. Interrupt — 흐름 전환 규칙

Interrupt는 CPU가 **언제 현재 실행 흐름을 중단하고 다른 코드로 전환해야 하는지**를 정의하는 규칙이다.

이 규칙에는 다음이 포함된다.

- 인터럽트 발생 시점
- 현재 명령어를 어디까지 마무리하는지
- 파이프라인을 flush하는 이유
- ISR로 어떻게 진입하는지
- 실행이 끝난 뒤 어떻게 복귀하는지

CPU는 인터럽트 발생 시 판단하거나 고민하지 않는다.  
**정해진 규칙에 따라 강제로 흐름을 전환**한다.

Interrupt 규칙은 실시간 시스템에서 가장 중요한 요소 중 하나다.

---

## 4. Privilege Mode — 권한 규칙

Privilege Mode는 CPU가 **이 코드가 무엇을 할 수 있는지를 하드웨어 차원에서 제한하는 규칙**이다.

CPU/MCU는 최소 두 가지 실행 모드를 가진다.

- User Mode (비특권 모드)
- Supervisor Mode (특권 모드)

이 규칙에 따라 다음이 제한된다.

- 실행 가능한 명령어
- 접근 가능한 레지스터
- 하드웨어 직접 제어 여부
- 인터럽트 및 시스템 설정 변경 가능 여부

Privilege Mode는 OS 기능이 아니라,  
**CPU 아키텍처에 포함된 규칙**이다.  
OS나 RTOS는 이 규칙을 활용할 뿐이다.

---

## CPU를 다시 정의하면

위 네 가지 규칙을 종합하면 CPU는 다음과 같이 정의할 수 있다.

> CPU는  
> 명령어 규칙(RISC/CISC)을 따르고,  
> 실행 방식(Pipeline)에 따라 명령을 처리하며,  
> 흐름 전환 규칙(Interrupt/Exception)에 의해 실행을 바꾸고,  
> 권한 규칙(Privilege Mode)에 따라 접근을 제한하는  
> **규칙 기반 실행 엔진**이다.

또는 한 문장으로 표현하면,

> **CPU는 명령어를 실행하는 장치가 아니라,  
> ‘명령·실행·흐름·권한에 대한 규칙을  
> 클록 단위로 강제하는 상태 기계(State Machine)’다.**

---

## 요약

- RISC/CISC → 무엇을 실행할 수 있는가
- Pipeline → 어떻게 실행하는가
- Interrupt → 언제 흐름을 바꾸는가
- Privilege Mode → 누가 실행할 수 있는가

> **CPU는 이 네 가지 규칙을 하드웨어로 강제하는 실행 엔진이다.**
