# 실제 개념
## MCU에서 Flash의 역할
Flash 메모리는 전원이 꺼져도 내용이 유지되는 비휘발성 메모리로, 주로 usb에 많이 쓰이는 메모리이다. (또 있나? )
Flash 메모리가 MCU에서 맡은 역할은 다음과 같다. 
### 1. 프로그램 저장
C 코드가 컴파일되어 기계어로 번역되면, 그 기계어를 flash에 기록합니다. 
런타임에 CPU는 PC로 Flash 주소를 가리켜 명령어를 가져와 실행합니다.
### 2. 부팅의 시작점
```
Reset 발생
→ PC = Reset Vector
→ Flash의 특정 주소에서 코드 실행 시작
```
이 때 Startup code와 main() 진입 전 초기화 코드는 모두 flash에 저장되어 있습니다. 
### 3. ISR 저장
### 4. 그 외
* 리셋 백터
* 인터럽트 벡터 테이블
* main() 이후의 코드
* 상수 데이터 (`const`)

```
Flash:
  - .text      (코드)
  - .rodata    (const 데이터)
  - 벡터 테이블
  - startup code
```

## flash 메모리 특징
* 읽기: CPU가 매클록마다 읽어드림
* 쓰기: 바이트 단위가 아니라 페이지 단위로 쓰기 떄문에 느리다.
* 삭제: 섹터 단위로 삭제되기 때문에 ???이런 부작용이 있고, 가장 느리다.

따라서, Flash는 지우지 않고는 다시 쓸 수 없습니다. (왜지?)
flash에 자주 쓰면 안됩니다. 


MCU는 다음과 같이 프로그램을 저장하고 실행한다. 
* 프로그램의 기계어 형태는 flash의 text 영역에 저장
* 빌드 타임에 정적변수와 
